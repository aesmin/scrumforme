{{extend 'default/layout_base.html'}}

<script>
    // OBS: other global variables for this page
    var url = {
      create_note : '{{=URL("_create_note")}}',
      savePosition: '{{=URL("_save_position")}}',
      update_note : '{{=URL("_update_note.json")}}',
      remove_note: '{{=URL("_remove_note.json")}}'
    },
    msg = {
        note_default_text : '{{=T("Your text")}}',
        confirm : '{{=T("Are you sure you want to continue?")}}',
        create_note_error : '{{=T("Error creating note!")}}'
    },
//    txt = {
//        team_page : '{{=T("Team Page")}}',
//        started_in : '{{=T("Started in")}}',
//        activities : '{{=T("Activities")}}',
//        upload : '{{=T("Upload")}}',
//        labels : '{{=T("Labels")}}',
//        delete_card : '{{=T("Delete")}}',
//        type_message : '{{=T("Type your message")}}',
//    },
//    button = {
//        comment : '{{=T("Comment")}}',
//        edit : '{{=T("Edit")}}',
//        save : '{{=T("Save")}}',
//        cancel : '{{=T("Cancel")}}',
//        delete : '{{=T("Delete")}}',
//    },
    info = {
        project_id : '{{=project_id}}',
        person_id : '{{=person_id}}',
    }


</script>
{{ import json }}
<div  class="container-fluid">
    <div class="row-fluid">
        <div id="area-brainstorm" class="span12">
            {{if 'brainstorm_notes' in globals():}}
                <ul class="notes-container">
                {{for i in brainstorm_notes:}}
                    {{ if i.position_: }}
                      {{ position = json.loads(i.position_) }}
                      <li class='{{=g_current_page("default/brainstorm/%s" %i.id,"active")}} note note--panel' data-id="{{=i.id}}" style="left: {{=position['left']}}px; top: {{=position['top']}}px;">
                    {{ else: }}
                      <li class='{{=g_current_page("default/brainstorm/%s" %i.id,"active")}} note' data-id="{{=i.id}}">
                    {{ pass }}
                      <div class="note-header">
                        {{ if user_has_permission_for_delete_note(i.created_by): }}
                          <i class="icon-note-header icon-note-header--delete icon-trash" data-pk="{{=i.id}}"></i>
                        {{ pass }}
                        <div class="clearfix"></div>
                      </div>
                      <div class="note-content">
                        <a class="editable-click editable" data-type="textarea" data-pk="{{=i.id}}" data-url="/_update_note.json" style="display: inline;">{{=i.text_}}</a>
                        <div class="clearfix"></div>
                      </div>
                      <div class="note-footer">
                        {{=i.created_at.strftime('%d/%m/%Y')}} - {{=i.created_by.name}}
                      </div>
                    </li>

                {{pass}}
                </ul>
            {{pass}}
        </div>
    </div><!--/row-->
</div><!--/container-fluid-->

